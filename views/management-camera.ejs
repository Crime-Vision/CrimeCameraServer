<!DOCTYPE html>

<html lang="en">
  <head>
    <title><%= title %></title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"
      integrity="sha256-t9UJPrESBeG2ojKTIcFLPGF7nHi2vEc7f5A2KpH/UBU="
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <div style="width: 25vw; height: 90vh; display: inline-block">
      <a href="/management" style="display: inline-block; width: 100px; text-align: center">Back</a>
      <h2 style="display: inline-block; text-align: center"><%= camera.nodeName %></h2>
      <pre class="prettyprint lang-json" style="height: 90vh"><%= JSON.stringify(camera, null, 4) %></pre>
    </div>

    <div class="content" style="width: 70vw; height: 90vh; display: inline-block">
      <canvas id="statsChart" style="width: 70vw; height: 90vh"></canvas>
    </div>

    <script>
      var ctx = document.getElementById('statsChart').getContext('2d');

      var statsChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: <%- JSON.stringify(perfmonDates) %>,
          datasets: [
            {
              label: 'avgLoad',
              data: <%- JSON.stringify(avgLoad) %>,
              backgroundColor: [
                'rgba(153, 102, 255, 0.2)',
              ],
              borderColor: [
                'rgba(153, 102, 255, 0.2)',
              ],
              borderWidth: 1,
              hidden: true,
            },
            {
              label: 'currentLoadUser',
              data: <%- JSON.stringify(currentLoadUser) %>,
              backgroundColor: [
                'rgba(255, 206, 86, 0.2)',
              ],
              borderColor: [
                'rgba(255, 206, 86, 0.2)',
              ],
              borderWidth: 1,
              hidden: true,
            },
            {
              label: 'currentLoad',
              data: <%- JSON.stringify(currentLoad) %>,
              backgroundColor: [
                'rgba(75, 192, 192, 0.2)',
              ],
              borderColor: [
                'rgba(75, 192, 192, 0.2)',
              ],
              borderWidth: 1,
            },
            {
              label: 'cpuTemperature',
              data: <%- JSON.stringify(cpuTemperature) %>,
              backgroundColor: [
                'rgba(54, 162, 235, 0.2)',
              ],
              borderColor: [
                'rgba(54, 162, 235, 0.2)',
              ],
              borderWidth: 1,
              hidden: true,
            },
            {
              label: 'memUsage',
              data: <%- JSON.stringify(memUsage) %>,
              backgroundColor: [
                'rgba(255, 159, 64, 0.2)',
              ],
              borderColor: [
                'rgba(255, 159, 64, 0.2)',
              ],
              borderWidth: 1,
            },
            {
              label: 'diskUsage',
              data: <%- JSON.stringify(diskUsage) %>,
              backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
              ],
              borderColor: [
                'rgba(255, 99, 132, 0.2)',
              ],
              borderWidth: 1,
            },
          ],
        }
      });
    </script>

    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  </body>
</html>
